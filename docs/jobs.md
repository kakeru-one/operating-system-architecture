## ジョブの種類
フォアグラウンドジョブとバックグラウンドジョブがある。
フォアグラウンドジョブは、実行中にシェルがそのジョブの完了を待機するため、ジョブが終了するまで他のコマンドを入力したり、新たなジョブを作成することができない。
バックグラウンドジョブは、プロセスの終了を待たずにシェルが次のプロンプトを表示し、ユーザーが他のコマンドを入力して別のジョブを生成できる状態のジョブである。

## ジョブ管理の簡単な例
```bash
root@6b51166b5928:/app# sleep infinity &
[1] 19339
root@6b51166b5928:/app# sleep infinity &
[2] 19340
root@6b51166b5928:/app# jobs
[1]-  Running                 sleep infinity &
[2]+  Running                 sleep infinity &
root@6b51166b5928:/app# fg 1
sleep infinity


^Z
[1]+  Stopped                 sleep infinity
root@6b51166b5928:/app# jobs
[1]+  Stopped                 sleep infinity
[2]-  Running                 sleep infinity &
```

## ログインセッションとプロセスグループ
SIDがセッションID。セッションリーダー（通常はbashなどのシェルになる）のPIDはセッションのIDに等しい。
PGIDはプロセスグループのID。`PGID=19576`のグループに`ps ajx`と`less`のフォアグラウンドジョブのプロセスが属していることがわかる。
```bash
root@6b51166b5928:/app# ps ajx | less
PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND
    0     1     1     1 pts/0        1 Ss+      0   0:00 /bin/bash
    0   428   428   428 pts/1    19576 Ss       0   0:00 /bin/bash
  428 19339 19339   428 pts/1    19576 T        0   0:00 sleep infinity
  428 19340 19340   428 pts/1    19576 S        0   0:00 sleep infinity
    0 19378 19378 19378 pts/2    19378 Ss+      0   0:00 /bin/bash
  428 19576 19576   428 pts/1    19576 R+       0   0:00 ps ajx
  428 19577 19576   428 pts/1    19576 S+       0   0:00 less
```

## 応用例(アプリケーションにおける非同期処理)
フォアグラウンドジョブとバックグラウンドジョブの概念は、RailsでSidekiqなどを使って非同期処理を実現する基礎に関連しています。Sidekiqは、Railsアプリケーションにおいてバックグラウンドジョブを実行するための仕組みです。この基礎的な概念が、Sidekiqのようなジョブキューシステムで使われています。
https://zenn.dev/overflow_offers/articles/20230130-how-to-use-sidekiq

### 関連性の詳細:
- **フォアグラウンドジョブ**:
  通常、Railsアプリケーションでリクエストを処理する際、処理が完了するまで（例えば、メール送信やデータベースの更新が終わるまで）、ユーザーは次の操作を待つ必要があります。このような処理はフォアグラウンドで行われ、処理が終わるまでアプリケーションが他のリクエストを受け付けない可能性があります。

- **バックグラウンドジョブ（Sidekiqの利用）**:
  非同期処理の代表的な例がSidekiqによるバックグラウンドジョブです。例えば、メール送信や画像の処理など時間がかかる処理をバックグラウンドジョブにしておけば、ユーザーはその処理が完了するのを待たずに次の操作に進むことができます。Sidekiqは、リクエスト処理が終わるのを待たずに、その処理をバックグラウンドで行い、Railsアプリケーションは即座に次のリクエストを受け付けることができます。

### Sidekiqの仕組みと非同期処理:
- **ジョブのキューイング**: ユーザーからのリクエストに基づき、メール送信やデータ処理などをバックグラウンドジョブとしてキューに入れる。
- **バックグラウンドでの実行**: ジョブはすぐに実行されるのではなく、バックグラウンドで非同期に実行されるため、Railsアプリケーションのパフォーマンスが向上する。
- **非同期処理**: プロセスの終了を待たずに、Railsはユーザーにすぐにレスポンスを返すことができる。

したがって、フォアグラウンドジョブとバックグラウンドジョブの概念は、RailsでSidekiqを使って非同期処理を実現する際の基本的なアイデアと強く関連しています。
